<?xml version="1.0" encoding="UTF-8"?> <!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="storememberboard">
<!-- 게시글 작성 삽이하는 sql -->
<insert id="memberboardwrite" parameterType="naver.dkxkgh98.smartorder.domain.StoreMemberBoard">

	insert into storememberboard(boardbno, boardtitle, boardcontent, boardip, membernickname,boardfile)
	values(memberboardseq.nextval, #{boardTitle}, #{boardContent}, #{boardIp}, #{memberNickname},#{boardFile})
</insert>
<!-- 전체 목록을 가져오는 sql -->
<select id="memberboardlist" resultType="naver.dkxkgh98.smartorder.domain.StoreMemberBoard">
 <!--
   select boardbno,boardtitle,boardregdate,boardreadcnt,u.membernickname 
  from  storememberboard u, storememberboard b
  where u.membernickname = b.membernickname
  order by boardupdatedate desc
-->
 select boardbno,boardtitle,boardregdate,boardreadcnt,u.membernickname
  from  storemembertbl u, storememberboard b
  where  u.membernickname = b.membernickname
  order by boardupdatedate desc
</select>

<!-- 글번호를 가지고 하나의 데이터를 가져오는 sql -->
<select id="memberboarddetail" resultType="naver.dkxkgh98.smartorder.domain.StoreMemberBoard" parameterType="java.lang.Integer">
select boardbno,boardtitle,boardcontent,boardregdate,boardupdatedate,boardreadcnt,boardip,boardfile,u.membernickname
from storemembertbl u, storememberboard b
where u.membernickname = b.membernickname and boardbno=#{boardbno}
</select>

<!-- 글 번호를 가지고 조회수 1증가시키는 sql -->
<update id="memberboardupdatereadcnt" parameterType="java.lang.Integer">
update storememberboard
set boardreadcnt = boardreadcnt + 1
where boardbno = #{boardbno}
</update>

</mapper>                            


